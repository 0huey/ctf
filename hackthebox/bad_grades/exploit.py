#!/usr/bin/env python3

from pwn import *

def Main(socket=None):
    context.binary = "/home/vagrant/Downloads/badgrades/bad_grades-sym"

    if not socket:
        proc = process()
        GDB(proc)

    else:
        ip, port = socket
        proc = remote(ip, int(port))

    proc.writeline("2")
    proc.writeline("999")

    proc.writeline("f")
    # ~ i = 1
    # ~ while i < 543:
        # ~ proc.writeline("42069")
        # ~ i += 1

    # ~ proc.writeline("A" * 8)

    proc.interactive()

def GDB(proc):
    script = list()
    script.append("break *main")
    script.append("continue")
    script.append("")

    script = '\n'.join(script)

    gdb.attach(proc, script)


if __name__ == "__main__":
    argv = sys.argv

    if len(argv) > 2:
        Main((argv[1], argv[2]))

    else:
        Main()
